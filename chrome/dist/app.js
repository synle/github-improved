!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _dataUtil=require("./util/dataUtil"),_dataUtil2=_interopRequireDefault(_dataUtil),_sidebarUtil=require("./util/sidebarUtil"),_sidebarUtil2=_interopRequireDefault(_sidebarUtil),_globalUtil=require("./util/globalUtil"),_globalUtil2=_interopRequireDefault(_globalUtil);chrome.extension.sendMessage({},function(response){function _init(){var urlParams=_globalUtil2["default"].getUrlVars(),visibleFlags=_dataUtil2["default"].getVisibleFlags();$("#side-bar-advanced-tool").remove(),sideBarContainer=$('<div id="side-bar-advanced-tool" />').appendTo("body");var searchBarContainer=($('<h3 id="side-bar-title" />').appendTo(sideBarContainer).text("Github Improved Toolbox"),$('<form id="side-bar-form-search" />').appendTo(sideBarContainer).on("submit",_sidebarUtil2["default"].onSearchRepo).toggle(visibleFlags.searchFile)),cmdContainer=$('<div id="side-bar-cmd-palette" />').appendTo(sideBarContainer);$('<button id="cmd-search-file" class="btn btn-sm" />').appendTo(cmdContainer).text("Search File").on("click",_sidebarUtil2["default"].onGoToGetSearchUrl).toggle(visibleFlags.searchFile),$('<button id="cmd-diff-whitespace-option" class="btn btn-sm" />').appendTo(cmdContainer).text("1"!==urlParams.w?"Whitespace Diff":"Non-Whitespace Diff").on("click","1"!==urlParams.w?_sidebarUtil2["default"].onGoToDiffNonWhitespaceUrl:_sidebarUtil2["default"].onGoTogetDiffWithWhitespaceUrl).toggle(visibleFlags.differ),$('<button id="cmd-diff-type" class="btn btn-sm" />').appendTo(cmdContainer).text("split"!==urlParams.diff?"Split Diff":"Unified Diff").on("click","split"!==urlParams.diff?_sidebarUtil2["default"].onGoToSplitDiffUrl:_sidebarUtil2["default"].onGoToUnifieDiffUrl).toggle(visibleFlags.differ),$('<button class="btn btn-sm" />').appendTo(cmdContainer).text("PR created by you").on("click",_sidebarUtil2["default"].onGoToOwnPRUrl),$('<button class="btn btn-sm" />').appendTo(cmdContainer).text("PR assigned to you").on("click",_sidebarUtil2["default"].onGoToAssignedPRUrl),$('<button class="btn btn-sm" />').appendTo(cmdContainer).text("PR mentioning you").on("click",_sidebarUtil2["default"].onGoToMentioningYouPRUrl),$('<input class="form-control" placeholder="Keyword" name="keyword" />').appendTo(searchBarContainer),$('<select class="form-control" name="type" />').appendTo(searchBarContainer).append($('<option value="file" />').text("File Content")).append($('<option value="path" />').text("Path Name")).append($('<option value="file,path" />').text("File and Content")),$('<input class="form-control" placeholder="Language" name="language" list="search-language" />').appendTo(searchBarContainer);var dataListSearchLanguages=$('<datalist id="search-language" />').appendTo(searchBarContainer);_dataUtil2["default"].getSupportedLanguages().map(function(language){$("<option />").attr("value",language).appendTo(dataListSearchLanguages)}),$('<button class="btn btn-sm" type="submit" />').appendTo(searchBarContainer).text("Search")}function _eventLoopHandler(){var urlParams=_globalUtil2["default"].getUrlVars(),visibleFlags=_dataUtil2["default"].getVisibleFlags();sideBarContainer.find("#cmd-search-file").off("click").toggle(visibleFlags.searchFile),sideBarContainer.find("#cmd-diff-whitespace-option").off("click").text("1"!==urlParams.w?"Whitespace Diff":"Non-Whitespace Diff").on("click","1"!==urlParams.w?_sidebarUtil2["default"].onGoToDiffNonWhitespaceUrl:_sidebarUtil2["default"].onGoTogetDiffWithWhitespaceUrl).toggle(visibleFlags.differ),sideBarContainer.find("#cmd-diff-type").off("click").text("split"!==urlParams.diff?"Split Diff":"Unified Diff").on("click","split"!==urlParams.diff?_sidebarUtil2["default"].onGoToSplitDiffUrl:_sidebarUtil2["default"].onGoToUnifieDiffUrl).toggle(visibleFlags.differ),sideBarContainer.find("#side-bar-form-search").toggle(visibleFlags.searchFile)}var sideBarContainer,readyStateCheckInterval=setInterval(function(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),_init(),setInterval(_eventLoopHandler,3e3))},10)})},{"./util/dataUtil":2,"./util/globalUtil":3,"./util/sidebarUtil":4}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dataUtil={getGitInfo:function(){var owner,repo,pathName=location.pathname,urlSplits=pathName.split("/");"pulls"!==urlSplits[1]&&(owner=urlSplits[1],repo=urlSplits[2]);var branch="master";(pathName.indexOf("/blob/")>=0||pathName.indexOf("/tree/")>=0&&urlSplits.length>=5)&&(branch=urlSplits[4]);var commit;(pathName.indexOf("/commit/")>=0||pathName.indexOf("/commits/")>=0)&&(commit=urlSplits[urlSplits.length-1]);var file;pathName.indexOf("/blob/")>=0&&(file=urlSplits.slice(5).join("/"));var pull;return pathName.indexOf("/pull/")>=0&&pathName.indexOf("/files")>=0&&(pull=urlSplits[urlSplits.length-2]),{owner:owner,repo:repo,branch:branch,commit:commit,file:file,pull:pull}},getVisibleFlags:function(){var gitInfo=dataUtil.getGitInfo();return{differ:!(!gitInfo.owner||!gitInfo.repo||!gitInfo.commit&&!gitInfo.pull),searchFile:!(!gitInfo.owner||!gitInfo.repo)}},getSupportedLanguages:function(){return["css","scss","html","js","json","xml","java"]}};exports["default"]=dataUtil},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var util={getUrlForParam:function(params){var queryString=util.getSerializedQueryString();return queryString?"https://"+location.hostname+location.pathname+"?"+queryString.join("&"):"https://"+location.hostname+location.pathname},getSerializedQueryString:function(params){var paramKeys=Object.keys(params||{});if(0===paramKeys.length)return"";var queryString=[];return paramKeys.map(function(paramKey){var paramVal=params[paramKey];queryString.push(paramKey+"="+paramVal)}),queryString.join("&")},getUrlVars:function(){var hash,vars={},url=location.href;if(url.indexOf("?")===-1)return vars;for(var hashes=url.slice(url.indexOf("?")+1).split("&"),i=0;i<hashes.length;i++)hash=hashes[i].split("="),vars[hash[0]]=hash[1];return vars}};exports["default"]=util},{}],4:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _urlUtil=require("./urlUtil"),_urlUtil2=_interopRequireDefault(_urlUtil),sideBarTool={onGoToSplitDiffUrl:function(){location.href=_urlUtil2["default"].getSplitDiffUrl()},onGoToUnifieDiffUrl:function(){location.href=_urlUtil2["default"].getUnifiedDiffUrl()},onGoToDiffNonWhitespaceUrl:function(){location.href=_urlUtil2["default"].getDiffNonWhitespaceUrl()},onGoTogetDiffWithWhitespaceUrl:function(){location.href=_urlUtil2["default"].getDiffWithWhitespaceUrl()},onGoToGetSearchUrl:function(){location.href=_urlUtil2["default"].getSearchUrl()},onGoToOwnPRUrl:function(){location.href=_urlUtil2["default"].getOwnPRUrl()},onGoToAssignedPRUrl:function(){location.href=_urlUtil2["default"].getAssignedPRUrl()},onGoToMentioningYouPRUrl:function(){location.href=_urlUtil2["default"].getMentioningPRUrl()},onSearchRepo:function(){var formSearch=$("#side-bar-form-search"),formSearchData=formSearch.serializeArray().reduce(function(res,formData){return formData.value&&(res[formData.name]=formData.value),res},{});return location.href=_urlUtil2["default"].getRepoSearchResultUrl(formSearchData.keyword,formSearchData.language,formSearchData.type,formSearchData.author),!1}};exports["default"]=sideBarTool},{"./urlUtil":5}],5:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _dataUtil=require("./dataUtil"),_dataUtil2=_interopRequireDefault(_dataUtil),_globalUtil=require("./globalUtil"),_globalUtil2=_interopRequireDefault(_globalUtil),urlUtil={getDiffNonWhitespaceUrl:function(){var urlParams=_globalUtil2["default"].getUrlVars();return urlParams.w=1,_globalUtil2["default"].getUrlForParam(urlParams)},getDiffWithWhitespaceUrl:function(){var urlParams=_globalUtil2["default"].getUrlVars();return urlParams.w=0,_globalUtil2["default"].getUrlForParam(urlParams)},getSplitDiffUrl:function(){var urlParams=_globalUtil2["default"].getUrlVars();return urlParams.diff="split",_globalUtil2["default"].getUrlForParam(urlParams)},getUnifiedDiffUrl:function(){var urlParams=_globalUtil2["default"].getUrlVars();return urlParams.diff="unified",_globalUtil2["default"].getUrlForParam(urlParams)},getSearchUrl:function(){var gitInfo=_dataUtil2["default"].getGitInfo(),owner=gitInfo.owner,repo=gitInfo.repo,branch=gitInfo.branch;return"https://"+location.hostname+"/"+owner+"/"+repo+"/find/"+branch},getOwnPRUrl:function(){return"https://github.com/pulls"},getAssignedPRUrl:function(){return"https://github.com/pulls/assigned"},getMentioningPRUrl:function(){return"https://github.com/pulls/mentioned"},getRepoSearchResultUrl:function(keyword,language,searchIn,author){var gitInfo=_dataUtil2["default"].getGitInfo(),owner=gitInfo.owner,repo=gitInfo.repo,urlParams={q:keyword+" in:"+searchIn};language&&(urlParams.q+=" extension:"+language),author&&(urlParams.q+=" user:"+author);var searchQueryString=_globalUtil2["default"].getSerializedQueryString(urlParams);return"https://"+location.hostname+"/"+owner+"/"+repo+"/search?"+searchQueryString}};exports["default"]=urlUtil},{"./dataUtil":2,"./globalUtil":3}]},{},[1]);
//# sourceMappingURL=app.js.map
